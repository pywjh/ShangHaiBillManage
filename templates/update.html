{% extends "base.html "%}


{% block content %}
<div class="container" style="padding: 10px; ">

    <form action="{{ url_for('update') }}" method="post">
        <div class="input-group" style="width: 200px;padding: 10px;display: inline-flex;">
            <input type="text" placeholder="账单月" class="form-control picker"
                   name='{{name}}'>
            <input type="submit" value="确认">
        </div>
    </form>

    <script type="text/javascript">
        $(".picker").datepicker({
            format: "yyyy-mm",
            todayBtn: "linked",
            language: "zh-CN",
            orientation: "auto",//日期控件显示位置
            startView: "months",//默认显示视图：months、years、centuries，可选
            minViewMode: "months",//最小显示视图
            keyboardNavigation: false,
            autoclose: true,
            todayHighlight: true
        });
    </script>


    <div>
        <form action="/add" method="post">
            <table style="margin: auto">
                <div><span style="font-size:20px;">新增数据:</span></div>
                <head>
                    <tr>
                        <th>
                            <input type="text" name="date_f"
                                   value="{{date_f}}"
                                   style="display: none;">
                        </th>
                        <th class="datepicker-inline">
                            <input type="text" placeholder="日期" class="form-control picker"
                           name='date'
                           value="{{dt.month}}_{{dt.day}}" required>
                        </th>
                        <th class="datepicker-inline">
                            <input type="text" placeholder="用途" class="form-control picker"
                           name='name' required>
                        </th>
                        <th class="datepicker-inline">
                            <input type="text" placeholder="金额（元）" class="form-control picker"
                           name='payment' required>
                        </th>
                        <th class="datepicker-inline">
                            <textarea type="text" placeholder="备注" class="form-control picker"
                              name='note' style="height: 34px;resize: none"></textarea>
                        </th>
                        <th class="datepicker-inline">
                            &emsp;&emsp;
                            <input id="eat" type="radio" name="type"
                                   checked value="eat">
                            <label for="eat">饮食</label>&emsp;
                            <input id="other" type="radio" name="type"
                                   value="other">
                            <label for="other">其他</label>
                        </th>
                        <th class="datepicker-inline">
                            <input id="add" type="submit" value="提交"
                                   class="input-group form-control picker" >
                        </th>
                    </tr>
                </head>
            </table>
        </form>
    </div>
<!--    <script>-->
<!--        $(function () {-->
<!--            let $button_submit = $('input#add'); //提交按钮-->
<!--            let $date_f = $('input[name="date_f"]'); // 年月-->
<!--            let $date = $('input[name="date"]'); // 日期-->
<!--            let $name = $('input[name="name"]'); // 用途-->
<!--            let $payment = $('input[name="payment"]'); // 金额-->
<!--            let $type = $('input[name="type"]'); // 类型-->
<!--            let $note = $('textarea[name="note"]'); // 备注-->

<!--            var web_url = window.location.host;-->
<!--            var date_f = $date_f.val();-->
<!--            var date = $date.val();-->
<!--            var name = $name.val();-->
<!--            var payment = $payment.val();-->
<!--            var type = $type.val();-->
<!--            var note = $note.val();-->

<!--            $button_submit.click(function () {-->
<!--                let url = 'http://' + web_url + '/add/';-->
<!--                let data = {-->
<!--                    date_f: date_f,-->
<!--                    date: date,-->
<!--                    name: name,-->
<!--                    payment: payment,-->
<!--                    type: type,-->
<!--                    note: note,-->
<!--                };-->
<!--                $.ajax({-->
<!--                    url: url,-->
<!--                    type: "POST",-->
<!--                    data: JSON.stringify(data),-->
<!--                    // 请求内容的数据类型（前端发给后端的格式）-->
<!--                    contentType: "application/json; charset=utf-8",-->
<!--                    async: false,	// 关掉异步功能-->
<!--                })-->
<!--            })-->
<!--        })-->
<!--    </script>-->

</div>

<div class="container" style="padding: 10px; ">
    <table id="table" data-row-style="rowStyle" data-flat="true"
           data-virtual-scroll="true"
           data-height="1000" data-pagination="true"
           data-page-size="25"></table>
    <!--        <table id="table"  class=“table table-sm table-hover” data-row-style="rowStyle" data-flat="true" data-show-toggle="true" data-virtual-scroll="true" ></table>-->
    <script type='text/javascript'>

        $(function () {
            var data = {{data|tojson}}
            var columns = {{columns|tojson}}
            if (data.length == 0) {
                alert('所选择的日期未维护账单记录！');
                return
            }
            $('#table').bootstrapTable({
                data: data,
                columns: columns,
                striped: 'true',
            });

        });


    </script>
</div>

{% endblock %}